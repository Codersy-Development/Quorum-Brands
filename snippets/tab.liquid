{%- liquid
  assign output_tab = false
  assign clean_title = title | strip | remove: '&nbsp;' | remove: '&#160;' | remove: '&#8203;'
  assign clean_content = content | strip | remove: '&nbsp;' | remove: '&#160;' | remove: '&#8203;'
  
  # Remove any HTML tags to check if there's actual content
  assign title_text = clean_title | strip_html | strip
  assign content_text = clean_content | strip_html | strip
  
  if title_text != blank or content_text != blank
    assign output_tab = true
  endif
-%}

{%- if output_tab -%}
  <div class="collapsibles-wrapper collapsibles-wrapper--border-bottom">
    <button type="button"
      class="label collapsible-trigger collapsible-trigger-btn collapsible-trigger-btn--borders collapsible--auto-height{% if force_open %} is-open{% endif %}" aria-controls="Product-content-{{ id }}"
      {% if force_open %}aria-expanded="true"{% endif %}>
      {{- clean_title | strip -}}
      {%- render 'collapsible-icons' -%}
    </button>
    <div id="Product-content-{{ id }}"
      class="collapsible-content collapsible-content--all{% if force_open %} is-open{% endif %}"
      {% if force_open %}style="height: auto;"{% endif %}>
      <div class="collapsible-content__inner rte">
        {{- clean_content | strip -}}
      </div>
    </div>
  </div>
{%- endif -%}